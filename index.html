<!-- @format -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Video App UI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <link href="https://fonts.googleapis.com/css?family=Noto Sans" rel="stylesheet" />
    <!-- <script src="/flv.js"></script> -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.6.2/flv.min.js"
      integrity="sha512-49OFf+8jaHx4Vb7iFNb46Loq1pIxXlEYeVOQRIx0KLBRF4KSV6E7QK2Vw5r416TQDyBJW+DFh2CyTV7+gCWd6g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="./nmrtc.min.js"></script>
  </head>
  <body class="dark">
    <div class="app-container">
      <button class="mode-switch">
        <svg
          class="sun"
          fill="none"
          stroke="#fbb046"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          class="feather feather-sun"
          viewBox="0 0 24 24"
        >
          <defs />
          <circle cx="12" cy="12" r="5" />
          <path
            d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"
          />
        </svg>
        <svg
          class="moon"
          fill="none"
          stroke="#ffffff"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          class="feather feather-moon"
          viewBox="0 0 24 24"
        >
          <defs />
          <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />
        </svg>
      </button>
      <div class="left-side">
        <div class="navigation">
          <a id="live" class="nav-link icon">
            <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
              <path
                d="M479.9 187.52l-90.19 68.53v-52.6a20 20 0 00-20-20H20a20 20 0 00-20 20V492a20 20 0 0020 20h349.71a20 20 0 0020-20v-52.6l90.18 68.52c13.05 9.91 32.1.67 32.1-15.92V203.45c0-16.5-18.94-25.92-32.1-15.93zM349.7 472H40V223.45h309.71zM472 451.68l-82.29-62.53V306.3L472 243.77zM87.96 79.24C129.62 28.88 190.86 0 256 0c65.13 0 126.37 28.88 168.03 79.24a20 20 0 01-30.82 25.5A177.6 177.6 0 00256 40a177.6 177.6 0 00-137.21 64.73 20 20 0 11-30.83-25.5zm240.36 32.21a20 20 0 11-21.02 34.03 97.57 97.57 0 00-51.3-14.53 97.6 97.6 0 00-51.31 14.53 20 20 0 11-21.02-34.03A137.53 137.53 0 01256 90.95c25.59 0 50.6 7.09 72.32 20.5zm0 0"
              />
            </svg>
          </a>
          <a id="cam" class="nav-link icon active">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-camera"
              viewBox="0 0 24 24"
            >
              <path
                d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"
              ></path>
              <circle cx="12" cy="13" r="4"></circle>
            </svg>
            <!-- <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-home"
              viewBox="0 0 24 24"
            >
              <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z" />
              <path d="M9 22V12h6v10" />
            </svg> -->
          </a>
          <a id="setting" class="nav-link icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-settings"
              viewBox="0 0 24 24"
            >
              <circle cx="12" cy="12" r="3" />
              <path
                d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"
              />
            </svg>
          </a>
        </div>
      </div>
      <div class="app-main" id="cam-stream">
        <div class="video-call-wrapper" style="background-color: #000000">
          <div class="video-participant">
            <div class="participant-actions">
              <button class="btn-mute hidden"></button>
              <button class="btn-camera hidden"></button>
            </div>
            <a class="name-tag hidden"
              >LIVE <span style="padding: 5px 8px; border-radius: 100%" id="live-count">0</span></a
            >
            <a class="status">
              Status :
              <span id="status">Not Live</span>
            </a>
            <video id="video1" style="height: 100%; width: 100%" autoplay muted></video>
          </div>
          <div>
            <input
              type="text"
              id="stream-name"
              placeholder="Stream Name"
              aria-label="Stream Name"
              class="hidden"
            />
          </div>
        </div>
        <div class="video-call-actions">
          <button class="start" id="start-btn">Go Live</button>
          <button class="stop hidden" id="stop-btn">Stop Live</button>
          <button
            class="video-action-button mic"
            onclick="window.toggleAudio()"
            id="mic-btn"
          ></button>
          <button
            class="video-action-button camera"
            onclick="window.toggleVideo()"
            id="camera-btn"
          ></button>
          <button
            class="video-action-button share hidden"
            id="share-btn"
            onclick="window.copy('#stream-name')"
          ></button>
        </div>
      </div>
      <div class="app-main" id="rtmp-stream" style="display: none">
        <div class="video-call-wrapper" style="background-color: #000000">
          <div class="video-participant">
            <a class="name-tag">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="feather feather-users"
              >
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
              </svg>
              <span style="padding: 5px 8px; border-radius: 100%" id="livecount">0</span></a
            >
            <video id="video2" style="height: 100%; width: 100%" autoplay muted></video>
          </div>
        </div>
        <div id="rtmp-details">
          <label for="rtmp">Stream URL</label>
          <div class="rtmp-link-area">
            <input
              type="text"
              id="rtmp-link1"
              name="rtmp-link"
              class="input-text rtmp-link"
              placeholder="RTMP Link"
              style="padding: 0; border: none"
              disabled
            />
            <button class="send-button" onclick="window.copy('#rtmp-link1')">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                xmlns:v="https://vecta.io/nano"
              >
                <path
                  d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"
                />
                <rect x="8" y="2" width="8" height="4" rx="1" />
              </svg>
            </button>
          </div>

          <label for="streamkey">Stream Key</label>
          <div class="rtmp-link-area">
            <input
              type="password"
              id="streamkey"
              name="streamkey"
              class="input-text"
              placeholder="Stream Key"
              style="padding: 0; border: none"
              disabled
            />
            <button class="send-button" style="margin-right: 8px" onclick="window.showKey()">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="feather feather-eye"
              >
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
            <button class="send-button" onclick="window.copy('#streamkey')">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                xmlns:v="https://vecta.io/nano"
              >
                <path
                  d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"
                />
                <rect x="8" y="2" width="8" height="4" rx="1" />
              </svg>
            </button>
          </div>

          <label for="rtmp">Watch Link</label>
          <div class="rtmp-link-area">
            <input
              type="text"
              id="stream-link1"
              name="stream-link"
              class="input-text"
              placeholder="Stream Link"
              style="padding: 0; border: none"
              disabled
            />
            <button class="send-button" onclick="window.copyStreamLink()">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                xmlns:v="https://vecta.io/nano"
              >
                <path
                  d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"
                />
                <rect x="8" y="2" width="8" height="4" rx="1" />
              </svg>
            </button>
          </div>
        </div>
      </div>
      <div class="right-side">
        <button class="btn-close-right">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            class="feather feather-x-circle"
            viewBox="0 0 24 24"
          >
            <defs></defs>
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M15 9l-6 6M9 9l6 6"></path>
          </svg>
        </button>
        <div class="chat-container">
          <div class="chat-header">
            <button class="chat-header-button">Live Chat</button>
          </div>
          <div class="chat-area"></div>
          <div class="chat-typing-area-wrapper">
            <div class="chat-typing-area">
              <input type="text" placeholder="Type your message..." class="chat-input" />
              <button class="send-button">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="feather feather-send"
                  viewBox="0 0 24 24"
                >
                  <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
      <button class="expand-btn">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-message-circle"
        >
          <path
            d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"
          />
        </svg>
      </button>
    </div>
    <!-- The Modal -->
    <div id="setting-modal" class="modal hidden">
      <!-- Modal content -->
      <div class="modal-content">
        <div style="display: flex; flex-direction: column">
          <!-- <label for="rtmp">RTMP Link</label>
          <div class="rtmp-link-area">
            <input
              type="text"
              id="rtmp-link"
              name="rtmp-link"
              class="input-text"
              placeholder="RTMP Link"
              style="padding: 0; border: none"
              disabled
            />
            <button class="send-button" onclick="window.copy('#rtmp-link')">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                xmlns:v="https://vecta.io/nano"
              >
                <path
                  d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"
                />
                <rect x="8" y="2" width="8" height="4" rx="1" />
              </svg>
            </button>
          </div> -->

          <label for="rtmp">Stream Link</label>
          <div class="rtmp-link-area">
            <input
              type="text"
              id="stream-link"
              name="stream-link"
              class="input-text"
              placeholder="Stream Link"
              style="padding: 0; border: none"
              disabled
            />
            <button class="send-button" onclick="window.copyStreamLink()">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                xmlns:v="https://vecta.io/nano"
              >
                <path
                  d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"
                />
                <rect x="8" y="2" width="8" height="4" rx="1" />
              </svg>
            </button>
          </div>

          <label for="audio">Audio Devices</label>
          <select id="audio" name="audio" class="input-text">
            <option value="">Default</option>
          </select>

          <label for="video">Video Devices</label>
          <select id="video" name="video" class="input-text">
            <option value="">Default</option>
          </select>
          <button class="submit-btn" id="save-btn">Save Settings</button>
        </div>
      </div>
    </div>
    <!-- partial -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.3.2/uuid.min.js"
      integrity="sha512-UNM1njAgOFUa74Z0bADwAq8gbTcqZC8Ej4xPSzpnh0l6KMevwvkBvbldF9uR++qKeJ+MOZHRjV1HZjoRvjDfNQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
    <script src="./script.js"></script>
    <script src="./control.js"></script>
    <script>
      $("#cam").addEventListener("click", () => {
        $("#rtmp-stream").style.display = "none";
        $("#cam-stream").style.display = "flex";
        changeActive("#cam");
      });
      $("#live").addEventListener("click", () => {
        $("#cam-stream").style.display = "none";
        $("#rtmp-stream").style.display = "flex";
        changeActive("#live");
      });
      function showKey() {
        let strKey = $("#streamkey").type;
        if (strKey == "password") {
          $("#streamkey").type = "text";
          return;
        }
        $("#streamkey").type = "password";
      }
      var videoElement = document.getElementById("video2");
      var flvPlayer;
      let protocol = location.protocol == "http:" ? "ws" : "wss";
      let port = location.protocol == "http:" ? "8000" : "8443";
      streamLt(strname);
      function streamLt(strname) {
        let strLink = `${protocol}://${location.hostname}:${port}/live/${strname}.flv`;
        // console.log(strLink);
        if (flvjs.isSupported()) {
          flvPlayer = flvjs.createPlayer({
            type: "flv",
            isLive: true,
            url: strLink,
          });
          flvPlayer.attachMediaElement(videoElement);
          flvPlayer.load();
          flvPlayer.play();
        }
      }
    </script>
  </body>
</html>
